/* Auto generated by script before build */
#ifndef pins_board
#define pins_board

#include <Arduino.h>
#include <ESPAsyncWebServer.h>
#include <AsyncJson.h>
#include <ArduinoJson.h>

void onListPinsApiAction(AsyncWebServerRequest *request) {
  AsyncJsonResponse * response = new AsyncJsonResponse();
  auto root = response->getRoot();
  auto pins = root.createNestedArray("pins");

  {% for pin_name, pin_const in pins.items() %}
  pins.add("{{ pin_name }}");
  {% endfor %}

  response->setLength();
  request->send(response);
}

void enablePins() {
  Serial.println("Enabling pins: ");
  {% for pin_name, pin_const in pins.items() %}
    Serial.println(F("{{ pin_name }} set to {{ default_state }}"));
    pinMode({{ pin_name }}, OUTPUT);
    digitalWrite({{ pin_name }}, {{ default_state }});
  {% endfor %}

  Serial.println("... OK");
}

uint8_t pinNameToId(const char * pinName) {
  {% for pin_name, pin_const in pins.items() %}
    if (strcmp(pinName, "{{ pin_name }}") == 0) {
      return {{ pin_const }};
    }
  {% endfor %}

  return 0;
}

#endif
